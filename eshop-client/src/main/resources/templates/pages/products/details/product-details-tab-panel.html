<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<body>
	<th:block th:fragment="product-details-tab-panel">
		<ul class="nav nav-tabs" id="productTabs" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="descriptionTab" href="#description"
					data-toggle="tab" role="tab" aria-controls="description" aria-selected="true">
					<span th:text="#{msg.common.description}">Description</span>	
				</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="attributesTab" href="#attributes"
				 	data-toggle="tab" role="tab" aria-controls="attributes" aria-selected="false">
				 	<span th:text="#{msg.common.attributes}">Attributes</span>
				 </a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="commentsTab" href="#comments"
				 	data-toggle="tab" role="tab" aria-controls="comments" aria-selected="false">
				 	<span th:text="|#{msg.common.comments} (${#lists.size(product.comments)})|">Comments</span>	
				 </a>
			</li>
		</ul>
		<div class="tab-content" id="productTabsContent">
			<div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="descriptionTab">
			
				
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			</div>
			<div class="tab-pane fade" id="attributes" role="tabpanel" aria-labelledby="attributesTab">
				<div class="row">
					<div class="col-12 col-md-10 col-lg-10">
						<p th:unless="${product.attributes}" class="mt-4" th:text="#{msg.common.noInfo}"></p>
						<table th:if="${product.attributes}" class="table table-striped table-sm">
							<tbody th:each="group : ${product.attributes}">
								<tr>
									<th scope="col" colspan="2">
										<span th:text="${group.key}"></span>
									</th>
								</tr>
								<tr th:each="attr: ${group.value}">
									<td style="width: 50%"><span th:text="${attr.key}"></span></td>
									<td><span th:text="${#strings.isEmpty(#messages.msgOrNull(attr.value)) ? attr.value : #messages.msg(attr.value)}"></span></td>
								</tr>
							</tbody>
						</table>							
					</div>
				</div>
			</div>
			<div class="tab-pane fade" id="comments" role="tabpanel" aria-labelledby="commentsTab">
				<div class="row">
					<div class="col-md-6">
						<div id="addComment" class="card mt-4 mb-4">
							<div id="addCommentHeader" class="card-header">
								<a id="addCommentButton" href="#" class="card-link"
									data-toggle="collapse" data-target="#addCommentBody" role="button" aria-expanded="false" aria-controls="addCommentBody">
									[[#{msg.common.addComment}]]	
								</a>
							</div>
						  	<div id="addCommentBody" class="card-body collapse">
						  		<form id="addCommentForm" th:action="${@environment.getProperty('url.product.add-comment')}" method="POST">
						  			<div class="form-group required">
									    <label for="addCommentName" class="font-weight-bold">[[#{msg.common.yourName}]]</label>
									    <input type="text" name="name" class="form-control form-control-sm" id="addCommentName">
									</div>
									<div class="form-group required">
									    <label for="addCommentEmail" class="font-weight-bold">[[#{msg.common.email}]]</label>
									    <input type="text" name="email" class="form-control form-control-sm" id="addCommentEmail">
									</div>
									<div class="form-group required">
										<label for="addCommentRating" class="font-weight-bold">[[#{msg.common.rateProduct}]]</label>
										<div id="product-rate" class="star-rating product-star-rating" th:onmouseleave="|onInterruptedRate()|">
									       	<span th:each="i : ${#numbers.sequence(1, 5)}" class="fa fa-star fa-2x"
									       		th:data-rating="${i}"
									       		th:onmouseover="|onHoverRate($(this))|"
									       		th:onclick="|onProductRate(${i})|">
									       	</span>
									   		<input type="hidden" id="addCommentRating" name="productRating" class="rating-value" value="0">
									  	</div>
									</div>
									<div class="form-group required">
									    <label for="addCommentText" class="font-weight-bold">[[#{msg.common.yourComment}]]</label>
									    <textarea name="comment" class="form-control form-control-sm" id="addCommentText"></textarea>
									</div>
									<input  id="addCommentProduct" type="hidden" name="productId" th:value="${product.id}">
							    	<button id="submitProductCommentButton" type="submit" class="btn btn-success mt-4">
										[[#{msg.common.submitComment}]]	
									</button>
							    </form>
						  	</div>
						</div>
					</div>
				</div>
				<div th:if="${#lists.isEmpty(product.comments)}">
					<p th:text="#{msg.common.noComments}"></p>
				</div>
				<div th:unless="${#lists.isEmpty(product.comments)}" class="list-group small">
					<div id="productCommentZero" class="d-none"></div>
					<th:block th:each="comment, iter : ${product.comments}">
						<div th:fragment="product-comment" class="list-group-item">
					 		<div class="row">
					 			<div class="col-6 text-left">
					 				<div>
					 					<span class="fa fa-user fa-xs"></span>
										<span class="font-weight-bold mr-4">[[${comment.name}]]</span>
									</div>
									<span th:replace="components/rating :: rating(name = ${comment.id}, value = ${comment.mark})">Rating</span>
					 			</div>
					 			<div class="col-6 text-right">
					 				<span class="fa fa-calendar fa-xs"></span>
					 				<span class="font-weight-italic">[[${#temporals.format(comment.date, 'yyyy-MM-dd hh:mm:ss')}]]</span>	
					 			</div>
					 			<div class="col-12">
					 				<span>[[${comment.text}]]</span>
					 			</div>
			 				</div>
				 		</div>
					</th:block>
				</div>
			</div>
		</div>
		
	</th:block>
</body>
</html>